{"ast":null,"code":"import { AuthActionTypes } from '../../types/auth';\nimport axios from 'axios';\nconst url = process.env.REACT_APP_API_UPL;\nexport const login = formValues => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: AuthActionTypes.LOGIN\n      });\n      const res = (await axios.post(`${url}/login`, JSON.stringify(formValues), {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })).data;\n      setTimeout(() => {\n        dispatch({\n          type: AuthActionTypes.LOGIN_SUCCESS,\n          payload: {\n            userId: res.user.id,\n            token: res.accessToken\n          }\n        });\n      }, 1000);\n    } catch (e) {\n      var _response;\n\n      dispatch({\n        type: AuthActionTypes.LOGIN_ERROR,\n        payload: (_response = e.response) === null || _response === void 0 ? void 0 : _response.data\n      });\n    }\n  };\n};\nexport const logout = () => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: AuthActionTypes.LOGOUT\n      });\n      setTimeout(() => {\n        dispatch({\n          type: AuthActionTypes.LOGOUT_SUCCESS\n        });\n      }, 1000);\n    } catch (e) {\n      var _response2;\n\n      dispatch({\n        type: AuthActionTypes.LOGOUT_ERROR,\n        payload: (_response2 = e.response) === null || _response2 === void 0 ? void 0 : _response2.data\n      });\n    }\n  };\n};","map":{"version":3,"names":["AuthActionTypes","axios","url","process","env","REACT_APP_API_UPL","login","formValues","dispatch","type","LOGIN","res","post","JSON","stringify","headers","data","setTimeout","LOGIN_SUCCESS","payload","userId","user","id","token","accessToken","e","LOGIN_ERROR","response","logout","LOGOUT","LOGOUT_SUCCESS","LOGOUT_ERROR"],"sources":["C:/Users/Евгения Шавкун/Desktop/test-app/src/store/actionCreators/auth.ts"],"sourcesContent":["import { AuthAction, AuthActionTypes, AuthResponse, User } from '../../types/auth'\r\nimport { Dispatch } from '@reduxjs/toolkit'\r\nimport axios, { AxiosError } from 'axios'\r\nconst url = process.env.REACT_APP_API_UPL\r\n\r\nexport const login = (formValues: User) => {\r\n  return async (dispatch: Dispatch<AuthAction>) => {\r\n    try {\r\n      dispatch({ type: AuthActionTypes.LOGIN })\r\n      const res = (\r\n        await axios.post(`${url}/login`, JSON.stringify(formValues), {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        })\r\n      ).data as AuthResponse\r\n      setTimeout(() => {\r\n        dispatch({\r\n          type: AuthActionTypes.LOGIN_SUCCESS,\r\n          payload: {\r\n            userId: res.user.id,\r\n            token: res.accessToken,\r\n          },\r\n        })\r\n      }, 1000)\r\n    } catch (e) {\r\n      dispatch({\r\n        type: AuthActionTypes.LOGIN_ERROR,\r\n        payload: (e as AxiosError).response?.data as string,\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport const logout = () => {\r\n  return async (dispatch: Dispatch<AuthAction>) => {\r\n    try {\r\n      dispatch({ type: AuthActionTypes.LOGOUT })\r\n      setTimeout(() => {\r\n        dispatch({\r\n          type: AuthActionTypes.LOGOUT_SUCCESS,\r\n        })\r\n      }, 1000)\r\n    } catch (e) {\r\n      dispatch({\r\n        type: AuthActionTypes.LOGOUT_ERROR,\r\n        payload: (e as AxiosError).response?.data as string,\r\n      })\r\n    }\r\n  }\r\n}"],"mappings":"AAAA,SAAqBA,eAArB,QAAgE,kBAAhE;AAEA,OAAOC,KAAP,MAAkC,OAAlC;AACA,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAxB;AAEA,OAAO,MAAMC,KAAK,GAAIC,UAAD,IAAsB;EACzC,OAAO,MAAOC,QAAP,IAA0C;IAC/C,IAAI;MACFA,QAAQ,CAAC;QAAEC,IAAI,EAAET,eAAe,CAACU;MAAxB,CAAD,CAAR;MACA,MAAMC,GAAG,GAAG,CACV,MAAMV,KAAK,CAACW,IAAN,CAAY,GAAEV,GAAI,QAAlB,EAA2BW,IAAI,CAACC,SAAL,CAAeP,UAAf,CAA3B,EAAuD;QAC3DQ,OAAO,EAAE;UACP,gBAAgB;QADT;MADkD,CAAvD,CADI,EAMVC,IANF;MAOAC,UAAU,CAAC,MAAM;QACfT,QAAQ,CAAC;UACPC,IAAI,EAAET,eAAe,CAACkB,aADf;UAEPC,OAAO,EAAE;YACPC,MAAM,EAAET,GAAG,CAACU,IAAJ,CAASC,EADV;YAEPC,KAAK,EAAEZ,GAAG,CAACa;UAFJ;QAFF,CAAD,CAAR;MAOD,CARS,EAQP,IARO,CAAV;IASD,CAlBD,CAkBE,OAAOC,CAAP,EAAU;MAAA;;MACVjB,QAAQ,CAAC;QACPC,IAAI,EAAET,eAAe,CAAC0B,WADf;QAEPP,OAAO,eAAGM,CAAD,CAAkBE,QAApB,8CAAE,UAA4BX;MAF9B,CAAD,CAAR;IAID;EACF,CAzBD;AA0BD,CA3BM;AA6BP,OAAO,MAAMY,MAAM,GAAG,MAAM;EAC1B,OAAO,MAAOpB,QAAP,IAA0C;IAC/C,IAAI;MACFA,QAAQ,CAAC;QAAEC,IAAI,EAAET,eAAe,CAAC6B;MAAxB,CAAD,CAAR;MACAZ,UAAU,CAAC,MAAM;QACfT,QAAQ,CAAC;UACPC,IAAI,EAAET,eAAe,CAAC8B;QADf,CAAD,CAAR;MAGD,CAJS,EAIP,IAJO,CAAV;IAKD,CAPD,CAOE,OAAOL,CAAP,EAAU;MAAA;;MACVjB,QAAQ,CAAC;QACPC,IAAI,EAAET,eAAe,CAAC+B,YADf;QAEPZ,OAAO,gBAAGM,CAAD,CAAkBE,QAApB,+CAAE,WAA4BX;MAF9B,CAAD,CAAR;IAID;EACF,CAdD;AAeD,CAhBM"},"metadata":{},"sourceType":"module"}